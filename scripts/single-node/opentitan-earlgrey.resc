:name: OpenTitan Earlgrey
:description: This script runs hello world example on OpenTitan Earl Grey at commit 1e86ba2a238dc26c2111d325ee7645b0e65058e5

$name?="EarlGrey"

using sysbus
mach create $name
machine LoadPlatformDescription @platforms/cpus/opentitan-earlgrey-cw310.repl

showAnalyzer sysbus.uart0

$boot?=@https://dl.antmicro.com/projects/renode/test_rom_fpga_cw310.elf-s_447072-1cdfd7b2a98b0c09f158d8267c5e9fbbf34dd33b
$boot_vmem?=@https://dl.antmicro.com/projects/renode/test_rom_fpga_cw310.39.scr.vmem-s_103772-d3a8f17879eedbcbf18e554bfd7871ccd992414e
$otp_vmem?=@https://dl.antmicro.com/projects/renode/open_titan-earlgrey--otp-img.24.vmem-s_44628-e17dede45d7e0509540343e52fe6fce1454c5339
$bin?=@https://dl.antmicro.com/projects/renode/open_titan-earlgrey--hello_world_fpga_cw310.elf-s_376640-48103e09bc133bb823f56b2768ae9f55fc0cc01e

macro reset
"""
    sysbus LoadELF $bin
    sysbus LoadELF $boot
    rom_ctrl LoadVmem $boot_vmem
    otp_ctrl LoadVmem $otp_vmem
"""

runMacro $reset

